{% load static %}
<html lang="en">


<main>

    <section class="py-5">
        <div class="container">
            <div class="row d-flex justify-content-center">
                <div class="user-panel custom-bg">
                    <div class="col-sm-9 col-md-11 col-lg-10">
                        <div class="user-panel-profile" id="id_image_container">
                            <img id="id_profile_image_display" src="{{ user_form.image.url }}" alt="">
                        </div>
                        <div class="change-profile-btn" id="id_middle_container">

                            <button class="btn custom-btn" id="id_text">تغییر عکس پروفایل</button>
                        </div>
                        <form class="form-control" action="" method="post" enctype="multipart/form-data">
                            {% csrf_token %}

                            <div class="user-panel-box">


                                <input class="d-none" type="file" name="profile_image" id="id_profile_image"
                                       onchange="readURL(this)">


                            </div>

                    </div>

                    <div class="d-flex justify-content-center mt-3 ">
                        <button type="submit" class="btn custom-btn w-50">اعمال تغییرات</button>
                    </div>
                    </form>
                </div>


            </div>
        </div>
        </div>
        </div>
    </section>


</main>


<!-- footer -->
<footer>
    <div class="container-fluid py-5">

        <section class="row d-flex align-items-baseline footer-items">
            <div class="col-6 col-sm-6 col-md-3 col-lg-3">
                <div>
                    <h6 class="mb-3 text-white"><span class="border-bottom">خدمات مشترکین</span></h6>
                    <a href="">
                        <p>راهنمای استفاده</p>
                    </a>
                    <a href="">
                        <p>سوالات متداول </p>
                    </a>
                    <a href="">
                        <p>قوانین و مقررات </p>
                    </a>
                    <a href="">
                        <p>پیشنهاد آموزش </p>
                    </a>
                </div>
            </div>
            <div class="col-6 col-sm-6 col-md-3 col-lg-3">
                <div>
                    <h6 class="mb-3 text-white"><span class="border-bottom">خدمات مشترکین</span></h6>
                    <a href="">
                        <p>راهنمای استفاده</p>
                    </a>
                    <a href="">
                        <p>سوالات متداول </p>
                    </a>
                    <a href="">
                        <p>قوانین و مقررات </p>
                    </a>
                    <a href="">
                        <p>پیشنهاد آموزش </p>
                    </a>
                </div>
            </div>
            <div class="col-6 col-sm-6 col-md-3 col-lg-3">
                <div>
                    <h6 class="mb-3 text-white"><span class="border-bottom">خدمات مشترکین</span></h6>
                    <a href="">
                        <p>مستندات جنگو</p>
                    </a>
                    <a href="">
                        <p>آموزش دارت</p>
                    </a>
                    <a href="">
                        <p>خلاصه کتاب‌های پایتون</p>
                    </a>
                    <a href="">
                        <p>چند نکته ی پایتونی</p>
                    </a>
                </div>
            </div>
            <div class="col-6 col-sm-6 col-md-3 col-lg-3">
                <div>
                    <h6 class="mb-3 text-white"><span class="border-bottom">خدمات مشترکین</span></h6>
                    <a href="" class="">
                        <img src="{% static 'image/f1.svg' %}" alt="">
                        اهواز، خیابان نادری، خیابان امیری، کوچه مهرگان، پلاک ۱۴، کد پستی 6381838168
                    </a>
                    <a href="" class="">
                        <img src="{% static 'image/f2.svg' %}" alt="">
                        پشتیبانی: 09910549803
                    </a>
                    <a href="" class="">
                        <img src="{% static 'image/f3.svg' %}" alt="">
                        30009010
                    </a>
                    <a href="" class="">
                        <img src="{% static 'image/f4.svg' %}" alt="">
                        amirhamiri74@gmial.com
                    </a>

                    <button class="footer-btn my-3">ارسال پیام</button>

                    <div class="social-media d-flex align-items-center flex-wrap ">
                        <a href=""> <i class="fa fa-instagram"></i></a>
                        <a href=""> <i class="fa fa-telegram"></i></a>
                        <a href=""> <i class="fa fa-whatsapp"></i></a>
                        <a href=""> <i class="fa fa-twitter"></i></a>
                    </div>

                </div>
            </div>
        </section>

    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="{% static 'components/bootstrap/bootstrap.bundle.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
<script src="{% static 'components/owl-carousel/owl.carousel.min.js' %}"></script>
<script src="{% static 'js/script.js' %}"></script>

<script type="text/javascript">

    var cropper;
    var imageFile;
    var base64ImageString;
    var cropX;
    var cropX;
    var cropWidth;
    var cropHeight;

    enableImageOverlay()

    function enableImageOverlay() {
        var text = document.getElementById("id_text")
        text.style.backgroundColor = "#0066ff"
        text.style.color = "white"
        text.style.fontSize = "16px"
        text.style.padding = "16px 32px"
        text.style.cursor = "pointer"

        var profileImage = document.getElementById("id_profile_image")
        profileImage.style.opacity = "1"
        profileImage.style.display = "block"
        profileImage.style.width = "100%"
        profileImage.style.height = "auto"
        profileImage.style.transition = ".5s ease"
        profileImage.style.backfaceVisibility = "hidden"
        profileImage.style.cursor = "pointer"

        var middleContainer = document.getElementById("id_middle_container")
        middleContainer.style.transition = ".5s ease"
        middleContainer.style.opacity = "0"
        middleContainer.style.position = "absolute"
        middleContainer.style.top = "50%"
        middleContainer.style.left = "50%"
        middleContainer.style.transform = "translate(-50%, -50%)"
        middleContainer.style.textAlign = "center"

        var imageContainer = document.getElementById("id_image_container")
        imageContainer.addEventListener("mouseover", function (event) {
            profileImage.style.opacity = "0.3"
            middleContainer.style.opacity = "1"
        })

        imageContainer.addEventListener("mouseout", function (event) {
            profileImage.style.opacity = "1"
            middleContainer.style.opacity = "0"
        })

        imageContainer.addEventListener("click", function (event) {
            document.getElementById('id_profile_image').click();
        });


    }

    function disableImageOverlay() {
        var profileImage = document.getElementById("id_profile_image_display")
        var middleContainer = document.getElementById("id_middle_container")
        var imageContainer = document.getElementById("id_image_container")
        var text = document.getElementById("id_text")

        imageContainer.removeEventListener("mouseover", function (event) {
            profileImage.style.opacity = "0.3"
            middleContainer.style.opacity = "1"
        })

        imageContainer.removeEventListener("mouseout", function (event) {
            profileImage.style.opacity = "1"
            middleContainer.style.opacity = "0"
        })

        profileImage.style.opacity = "1"
        middleContainer.style.opacity = "0"
        text.style.cursor = "default"
        text.style.opacity = "0"

        document.getElementById('id_image_container').removeEventListener("click", function (event) {
            event.preventDefault();
            // do nothing
        });
        document.getElementById('id_profile_image').addEventListener("click", function (event) {
            event.preventDefault();
            // do nothing
        });


    }


    /*
        Called when a new image is selected from file chooser dialog
    */
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                disableImageOverlay()
                var image = e.target.result
                var imageField = document.getElementById('id_profile_image_display')
                imageField.src = image

            };
            reader.readAsDataURL(input.files[0]);
        }
    };


</script>
</body>

</html>